{% extends "base.html.twig" %}

{% block title %}Accueil{% endblock %}

{% block stylesheets %}
        <link rel="shortcut icon" href="{{ asset('images/ftco-32x32.png') }}">
        {# CSS principaux #}
        <link rel="stylesheet" href="{{ asset('css/custom-bs.css') }}">
        <link rel="stylesheet" href="{{ asset('css/jquery.fancybox.min.css') }}">
        <link rel="stylesheet" href="{{ asset('css/bootstrap-select.min.css') }}">
        <link rel="stylesheet" href="{{ asset('fonts/icomoon/style.css') }}">
        <link rel="stylesheet" href="{{ asset('fonts/line-icons/style.css') }}">
        <link rel="stylesheet" href="{{ asset('css/owl.carousel.min.css') }}">
        <link rel="stylesheet" href="{{ asset('css/animate.min.css') }}">
        <link rel="stylesheet" href="{{ asset('css/style.css') }}">
{% endblock %}

{% block body %}

  <div id="overlayer"></div>
  <div class="loader">
    <div class="spinner-border text-primary" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>

<div class="site-wrap">

    <div class="site-mobile-menu site-navbar-target">
      <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-close mt-3">
          <span class="icon-close2 js-menu-toggle"></span>
        </div>
      </div>
      <div class="site-mobile-menu-body"></div>
    </div> <!-- .site-mobile-menu -->

    <!-- HOME -->
    <section class="home-section section-hero overlay bg-image" style="background-image: url('images/hero_1.jpg');" id="home-section">

      <div class="container">
        <div class="row align-items-center justify-content-center">
          <div class="col-md-12">
            <div class="mb-5 text-center">
              <h1 class="text-white font-weight-bold">Le moyen le plus simple pour obtenir l'emploi de vos rêves</h1>
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cupiditate est, consequuntur perferendis.</p>
            </div>
            <form id ="form-inscription" action ="{{ path('abonne_new') }}" method="post" class="search-jobs-form">
              {% for type, messages in app.flashes %}
                  <div class="alert alert-{{ type == 'success' ? 'success' : 'danger' }} alert-dismissible fade show" role="alert">
                      {% for message in messages %}
                          {{ message|raw }}
                      {% endfor %}
                      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                  </div>
              {% endfor %}
              <div class="row mb-5">
                <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
                  <input type="text" id="msisdn" name="msisdn" class="form-control form-control-lg" required maxlength="12" placeholder="242055...">
                </div>
                <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
                  <select class="selectpicker" data-style="btn-white btn-lg" data-width="100%" data-live-search="true" id="Ville" name="Ville" title="Selectionner Region" required>
                    <option value="Brazzaville">Brazzaville</option>
                    <option value="Pointe-Noire">Pointe-Noire</option>
                    <option value="Dolisie">Dolisie</option>
                    <option value="Nkayi">Nkayi</option>
                    <option value="Ouesso">Ouesso</option>
                    <option value="Kintélé">Kintélé</option>
                    <option value="Oyo">Oyo</option>
                    <option value="Bétou">Bétou</option>
                    <option value="Gamboma">Gamboma</option>
                    <option value="Owando">Owando</option>
                    <option value="Madingou">Madingou</option>
                    <option value="Impfondo">Impfondo</option>
                    <option value="Makoua">Makoua</option>
                    <option value="Sibiti">Sibiti</option>
                  </select>
                </div>
                <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
                  <select class="selectpicker" id="specialite" name="specialite" data-style="btn-white btn-lg" data-width="100%" data-live-search="true" title="Spécialité" required>
                    <option>Developpeur</option>
                    <option>Designer interieur</option>
                  </select>
                </div>
                <div class="form-group" hidden = tue>
                  <input type="password" name="password" id="password" class="form-control" value="K.RMASeHDyZm5tp" required>
                </div>
                <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
                  <button type="submit" class="btn btn-primary btn-lg btn-block text-white btn-search"><span class="icon-login icon mr-2"></span>S'abonner</button>
                </div>
              </div>
              <div class="row">
                <div class="col-md-12 popular-keywords">
                  <h3>Trending Keywords:</h3>
                  <ul class="keywords list-unstyled m-0 p-0">
                    <li><a href="#" class="">UI Designer</a></li>
                    <li><a href="#" class="">Python</a></li>
                    <li><a href="#" class="">Developer</a></li>
                  </ul>
                </div>
              </div>
            </form>

          </div>
        </div>
      </div>

      <a href="#next" class="scroll-button smoothscroll">
        <span class=" icon-keyboard_arrow_down"></span>
      </a>

    </section>
    
    <section class="py-5 bg-image overlay-primary fixed overlay" id="next" style="background-image: url('images/hero_1.jpg');">
      <div class="container">
        <div class="row mb-5 justify-content-center">
          <div class="col-md-7 text-center">
            <h2 class="section-title mb-2 text-white">JobBoard Site Stats</h2>
            <p class="lead text-white">Lorem ipsum dolor sit amet consectetur adipisicing elit. Expedita unde officiis recusandae sequi excepturi corrupti.</p>
          </div>
        </div>
        <div class="row pb-0 block__19738 section-counter">

          <div class="col-6 col-md-6 col-lg-3 mb-5 mb-lg-0">
            <div class="d-flex align-items-center justify-content-center mb-2">
              <strong class="number" data-number="1930">0</strong>
            </div>
            <span class="caption">Abonnements</span>
          </div>

          <div class="col-6 col-md-6 col-lg-3 mb-5 mb-lg-0">
            <div class="d-flex align-items-center justify-content-center mb-2">
              <strong class="number" data-number="54">0</strong>
            </div>
            <span class="caption">Offres postulés</span>
          </div>

          <div class="col-6 col-md-6 col-lg-3 mb-5 mb-lg-0">
            <div class="d-flex align-items-center justify-content-center mb-2">
              <strong class="number" data-number="120">0</strong>
            </div>
            <span class="caption">Emplois pourvus</span>
          </div>

          <div class="col-6 col-md-6 col-lg-3 mb-5 mb-lg-0">
            <div class="d-flex align-items-center justify-content-center mb-2">
              <strong class="number" data-number="550">0</strong>
            </div>
            <span class="caption">Entreprises</span>
          </div>            
        </div>
      </div>
    </section>

    <section class="site-section">
      <div class="container">

        <div class="row mb-5 justify-content-center">
          <div class="col-md-7 text-center">
            <h2 class="section-title mb-2">{{ total }} Offres d'emploi disponible</h2>
          </div>
        </div>
        {% if not statut %}
                  <ul class="job-listings mb-5">
                  {% for item in home_offre %}
                  <li class="job-listing d-block d-sm-flex pb-3 pb-sm-0 align-items-center">
                    <a href="{{ path('app_home') }}" onclick="alert('⚠️ Identifiez-vous pour accéder à cette offre.'); return false;">
                    <div class="job-listing-about d-sm-flex custom-width w-100 justify-content-between mx-4">
                      <div class="job-listing-position custom-width w-50 mb-3 mb-sm-0">
                        <h2>{{item.titre}}</h2>
                      </div>
                      <div class="job-listing-location mb-3 mb-sm-0 custom-width w-25">
                        <span class="icon-room"></span> {{item.lieu}}
                      </div>
                      <div class="job-listing-meta">
                      {% if item.tempsTaff == 'Full Time' %}
                        <span class="badge badge-success">Plein Temps</span>
                        {% else %}
                        <span class="badge badge-danger">Mi-Temps</span>
                      {% endif %}
                      </div>
                    </div>
                  </li>
                  {% else %}
                    <h2 class="text-center">Aucune offre trouvée.</h2>
                  {% endfor %} 
                </ul>

                {% else %}
                                  <ul class="job-listings mb-5">
                  {% for item in home_offre %}
                  <li class="job-listing d-block d-sm-flex pb-3 pb-sm-0 align-items-center">
                    <a href="{{ path('app_offres', {'slug':item.slug,'id': item.id}) }}"></a>
                    <div class="job-listing-logo">
                      <img src="{{ asset('uploads/images/' ~ item.entreprise.logo) }}" alt="{{ asset('uploads/images/' ~ item.entreprise.libele) }}" class="img-fluid">
                    </div>
                    <div class="job-listing-about d-sm-flex custom-width w-100 justify-content-between mx-4">
                      <div class="job-listing-position custom-width w-50 mb-3 mb-sm-0">
                        <h2>{{item.titre}}</h2>
                        <strong>{{item.entreprise.libele}}</strong>
                      </div>
                      <div class="job-listing-location mb-3 mb-sm-0 custom-width w-25">
                        <span class="icon-room"></span> {{item.lieu}}
                      </div>
                      <div class="job-listing-meta">
                      {% if item.tempsTaff == 'Full Time' %}
                        <span class="badge badge-success">Plein Temps</span>
                        {% else %}
                        <span class="badge badge-danger">Mi-Temps</span>
                      {% endif %}
                      </div>
                    </div>
                  </li>
                  {% else %}
                    <h2 class="text-center">Aucune offre trouvée.</h2>
                  {% endfor %} 
                </ul>
        {% endif %}

        <div class="row pagination-wrap">
          <div class="col-md-6 text-center text-md-left mb-4 mb-md-0">
            <span>Voir {{ (premiereEntree + 1) }}-{{ (premiereEntree + home_offre|length) }} des offres {{ total }} d'emploi</span>
          </div>
          <div class="col-md-6 text-center text-md-right">
            <div class="custom-pagination ml-auto">
              {% if pageActuelle > 1 %}
                <a href="{{ path('app_home', {'page': pageActuelle - 1, 'offresParPage': produitsParPage}) }}" class="prev">Prev</a>
              {% endif %}

              <div class="d-inline-block">
                {% for i in 1..nombreDePages %}
                  <a href="{{ path('app_home', {'page': i, 'offresParPage': produitsParPage}) }}" 
                     class="{% if i == pageActuelle %}active{% endif %}">
                    {{ i }}
                  </a>
                {% endfor %}
              </div>

              {% if pageActuelle < nombreDePages %}
                <a href="{{ path('app_home', {'page': pageActuelle + 1, 'offresParPage': produitsParPage}) }}" class="next">Next</a>
              {% endif %}
            </div>
          </div>
        </div>

      </div>
    </section>

{% if not statut %}

    <section class="py-5 bg-image overlay-primary fixed overlay" style="background-image: url('images/hero_1.jpg');">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-md-8">
            <h2 class="text-white">Job alerte +++</h2>
            <p class="mb-0 text-white lead">Directement sur votre telephone dans un SMS.</p>
          </div>
          <div class="col-md-3 ml-auto">
            <a href="{{ path('connexion.abonne') }}" class="btn btn-warning btn-block btn-lg">S'identifier</a>
          </div>
        </div>
      </div>
    </section>

  {% endif %}

    
    <section class="site-section py-4">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-12 text-center mt-4 mb-5">
            <div class="row justify-content-center">
              <div class="col-md-7">
                <h2 class="section-title mb-2">Les entreprises qui recrutent</h2>
                <p class="lead">Porro error reiciendis commodi beatae omnis similique voluptate rerum ipsam fugit mollitia ipsum facilis expedita tempora suscipit iste</p>
              </div>
            </div>           
          </div>
          {% for item in entreprise %}
          <div class="col-6 col-lg-3 col-md-6 text-center">
            <img src="{{asset('uploads/images/' ~ item.logo)}}" alt="Image" class="img-fluid logo-1">
          </div>
          {% endfor %}
        </div>
      </div>
    </section>

    <section class="bg-light pt-5 testimony-full">
        
        <div class="owl-carousel single-carousel">
          <div class="container">
            {% for publicites in publicite %}
             <a href="{{publicites.lienOrientation}}">
              <div class="row">
                <div class="col-lg-6 align-self-center text-center text-lg-left">
                  <blockquote>
                  </blockquote>
                </div>
                <div class="col-lg-6 align-self-end text-center text-lg-right">
                  <img src="{{asset('uploads/images/' ~ publicites.imagePub)}}" alt="Image" class="img-fluid mb-0">
                </div>
              </div>
              </a>
            {% endfor %}
          </div>
      </div>

    </section>
    
  </div>
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('js/form-validation.js') }}"></script>
    <script src="{{ asset('js/jquery.min.js') }}"></script>
    <script src="{{ asset('js/bootstrap.bundle.min.js') }}"></script>
    <script src="{{ asset('js/isotope.pkgd.min.js') }}"></script>
    <script src="{{ asset('js/stickyfill.min.js') }}"></script>
    <script src="{{ asset('js/jquery.fancybox.min.js') }}"></script>
    <script src="{{ asset('js/jquery.easing.1.3.js') }}"></script>
    <script src="{{ asset('js/jquery.waypoints.min.js') }}"></script>
    <script src="{{ asset('js/jquery.animateNumber.min.js') }}"></script>
    <script src="{{ asset('js/owl.carousel.min.js') }}"></script>
    <script src="{{ asset('js/bootstrap-select.min.js') }}"></script>
	<script src="{{ asset('js/custom.js') }}"></script>
{% endblock %}